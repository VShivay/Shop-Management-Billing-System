<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="font-inter antialiased bg-gray-50 flex min-h-screen text-gray-800">
    <aside class="sidebar fixed inset-y-0 left-0 w-64 bg-gradient-to-br from-gray-800 to-gray-900 text-gray-100 flex flex-col p-6 shadow-xl z-50 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out h-full overflow-y-auto custom-scrollbar">
        <div class="flex items-center mb-10">
            <i class="fas fa-store text-3xl text-blue-400 mr-3"></i>
            <h3 class="text-3xl font-extrabold text-white tracking-wide">ShopFlow</h3>
        </div>
        <nav class="flex-grow space-y-3">
            <a href="#" class="nav-link group" data-view="dashboardSummaryView">
                <i class="fas fa-chart-line text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">Dashboard</span>
            </a>
            <a href="create_bill.html" class="nav-link group">
                <i class="fas fa-file-invoice text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">Create Bill</span>
            </a>
            <a href="#" class="nav-link group" data-view="addProductView">
                <i class="fas fa-plus-circle text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">Add Product</span>
            </a>
            <a href="#" class="nav-link group" data-view="viewProductsView">
                <i class="fas fa-boxes text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">View Products</span>
            </a>
            <a href="#" class="nav-link group" data-view="addCustomerView">
                <i class="fas fa-user-plus text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">Add Customer</span>
            </a>
            <a href="#" class="nav-link group" data-view="viewCustomersView">
                <i class="fas fa-users text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">View Customers</span>
            </a>
            <a href="#" class="nav-link group" data-view="recordPaymentView">
                <i class="fas fa-money-bill-wave text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">Record Payment</span>
            </a>
            <a href="#" class="nav-link group" data-view="viewCustomerDuesView">
                <i class="fas fa-receipt text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">Customer Dues</span>
            </a>
            <a href="#" class="nav-link group" data-view="activityLogsView">
                <i class="fas fa-history text-lg group-hover:scale-110 transition-transform duration-200"></i>
                <span class="ml-3">Activity Logs</span>
            </a>
        </nav>
        <div class="mt-auto pt-8 border-t border-gray-700">
            <button onclick="logout()" class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5">
                <i class="fas fa-sign-out-alt mr-2"></i> Logout
            </button>
        </div>
    </aside>

            <div class="main-content-wrapper flex-1 flex flex-col md:ml-64 transition-all duration-300 ease-in-out">
                <header class="main-header bg-white p-5 md:hidden shadow-md flex items-center justify-between z-40">
                <button id="menuButton" class="text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md p-1 transition-transform duration-200 active:scale-95">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <h1 class="text-xl font-bold text-gray-800">Dashboard</h1>
                <div class="flex items-center space-x-2">
                    <span id="usernameMobile" class="text-gray-700 font-medium text-base">Loading...</span>
                </div>
            </header>


        <main class="flex-1 p-2 overflow-y-auto custom-scrollbar">
            <div id="message-box" class="message-box hidden transition-all duration-300 ease-in-out transform translate-y-0 opacity-100"></div>

            <h2 class="text-4xl font-extrabold text-gray-900 mb-3 hidden md:block animate-fade-in">Welcome, <span id="usernameDesktop" class="text-blue-600">Loading...</span></h2>

            <section id="dashboardSummaryView" class="content-section view-section animate-fade-in-up">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">Dashboard Overview</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="card transform hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
                        <div class="icon text-green-500"><i class="fas fa-dollar-sign"></i></div>
                        <div class="title">Total Sales Today</div>
                        <div id="totalSalesToday" class="value text-green-700">Loading...</div>
                    </div>

                    <div class="card transform hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
                        <div class="icon text-teal-500"><i class="fas fa-store"></i></div>
                        <div class="title">Retail Sales Today</div>
                        <div id="retailSalesToday" class="value text-teal-700">Loading...</div>
                    </div>

                    <div class="card transform hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
                        <div class="icon text-indigo-500"><i class="fas fa-truck"></i></div>
                        <div class="title">Wholesale Sales Today</div>
                        <div id="wholesaleSalesToday" class="value text-indigo-700">Loading...</div>
                    </div>

                    <div class="card transform hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
                        <div class="icon text-yellow-500"><i class="fas fa-hand-holding-usd"></i></div>
                        <div class="title">Total Dues Outstanding</div>
                        <div id="totalDuesOutstanding" class="value text-yellow-700">Loading...</div>
                    </div>

                    <div class="card transform hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
                        <div class="icon text-purple-500"><i class="fas fa-warehouse"></i></div>
                        <div class="title">Total Products in Stock</div>
                        <div id="totalProductsInStock" class="value text-purple-700">Loading...</div>
                    </div>

                    <div class="card transform hover:-translate-y-1 hover:shadow-lg transition-all duration-300">
                        <div class="icon text-orange-500"><i class="fas fa-medal"></i></div>
                        <div class="title">Top Selling Product Today</div>
                        <div id="topSellingProductToday" class="value text-lg text-orange-700">Loading...</div>
                    </div>
                </div>
                <div class="mt-12 p-6 bg-white rounded-xl shadow-md border border-gray-100 animate-fade-in">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Recent Activity</h3>
                    <p class="text-gray-600 text-lg">View your <a href="#" class="text-blue-600 hover:text-blue-800 font-semibold underline underline-offset-4 decoration-blue-300 hover:decoration-blue-500 transition-colors duration-200" data-view="activityLogsView">Activity Logs</a> for detailed recent actions and system events.</p>
                </div>
            </section>

            <section id="addProductView" class="content-section view-section hidden animate-fade-in-up">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">Add New Product</h3>
                <form id="addProductForm" class="grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                    <div class="input-group">
                        <label for="productName" class="input-label">Product Name:</label>
                        <input type="text" id="productName" required class="input-field">
                    </div>
                    <div class="input-group">
                        <label for="productType" class="input-label">Product Type:</label>
                        <select id="productType" required class="input-field">
                            <option value="piece">Piece</option>
                            <option value="weight">Weight</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="costPrice" class="input-label">Cost Price:</label>
                        <input type="number" id="costPrice" step="0.01" min="0" required class="input-field">
                    </div>
                    <div class="input-group">
                        <label for="retailPrice" class="input-label">Retail Price:</label>
                        <input type="number" id="retailPrice" step="0.01" min="0" required class="input-field">
                    </div>
                    <div class="input-group">
                        <label for="wholesalePrice" class="input-label">Wholesale Price:</label>
                        <input type="number" id="wholesalePrice" step="0.01" min="0" required class="input-field">
                    </div>
                    <div class="input-group">
                        <label for="productQuantity" class="input-label">Initial Quantity:</label>
                        <input type="number" id="productQuantity" step="0.01" min="0" required class="input-field">
                    </div>
                    <div class="input-group">
                        <label for="productUnit" class="input-label">Unit (e.g., pcs, kg, g):</label>
                        <input type="text" id="productUnit" required class="input-field">
                    </div>
                    <div class="md:col-span-2 text-center mt-6">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-plus-circle mr-2"></i> Add Product
                        </button>
                    </div>
                </form>
            </section>

            <section id="viewProductsView" class="content-section view-section hidden animate-fade-in-up max-w-full">
    <h3 class="text-xl font-bold text-gray-800 mb-4 border-b border-blue-500 pb-1">All Products</h3>
    <div class="bg-white p-4 rounded-lg shadow-md border border-gray-100">
        <div class="relative mb-4">
            <label for="viewProductSearch" class="input-label">Search Product:</label>
            <input type="text" id="viewProductSearch" placeholder="Search by product name..." class="input-field">
            <div id="viewProductSuggestions" class="suggestion-dropdown hidden"></div>
        </div>

        <!-- Table wrapper for horizontal scrolling -->
        <div class="overflow-x-auto custom-scrollbar">
            <table id="productsTable" class="w-full min-w-[1000px] bg-white border border-gray-200 rounded-lg overflow-hidden">
                <thead>
                    <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal border-b border-gray-200">
                        <th class="py-2 px-4 text-left">ID</th>
                        <th class="py-2 px-4 text-left">Name</th>
                        <th class="py-2 px-4 text-left">Type</th>
                        <th class="py-2 px-4 text-left">Cost Price</th>
                        <th class="py-2 px-4 text-left">Retail Price</th>
                        <th class="py-2 px-4 text-left">Wholesale Price</th>
                        <th class="py-2 px-4 text-left">Quantity</th>
                        <th class="py-2 px-4 text-left">Unit</th>
                        <th class="py-2 px-4 text-left">Created At</th>
                        <th class="py-2 px-4 text-left">Actions</th>
                    </tr>
                </thead>
                <tbody class="text-gray-700 text-sm font-light">
                    <!-- Dynamic rows go here -->
                </tbody>
            </table>
        </div>

        <p id="noProductsMessageView" class="text-center text-gray-500 mt-4 text-base hidden">No products found.</p>
    </div>
</section>

            <section id="addCustomerView" class="content-section view-section hidden animate-fade-in-up">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">Add New Customer</h3>
                <form id="addCustomerForm" class="grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                    <div class="input-group">
                        <label for="customerName" class="input-label">Customer Name:</label>
                        <input type="text" id="customerName" required class="input-field">
                    </div>
                    <div class="input-group">
                        <label for="customerMobile" class="input-label">Mobile Number:</label>
                        <input type="text" id="customerMobile" required class="input-field">
                    </div>
                    <div class="md:col-span-2 text-center mt-6">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-user-plus mr-2"></i> Add Customer
                        </button>
                    </div>
                </form>
            </section>

            <section id="viewCustomersView" class="content-section view-section hidden animate-fade-in-up">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">All Customers</h3>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                    <div class="relative mb-6">
                        <label for="viewCustomerSearch" class="input-label">Search Customer:</label>
                        <input type="text" id="viewCustomerSearch" placeholder="Search by name or mobile..." class="input-field">
                    </div>
                    <div class="overflow-x-auto custom-scrollbar">
                        <table id="customersTable" class="min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <thead>
                                <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal border-b border-gray-200">
                                    <th class="py-3 px-6 text-left">ID</th>
                                    <th class="py-3 px-6 text-left">Name</th>
                                    <th class="py-3 px-6 text-left">Mobile No.</th>
                                    <th class="py-3 px-6 text-left">Created At</th>
                                    <th class="py-3 px-6 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-700 text-sm font-light">
                                </tbody>
                        </table>
                    </div>
                    <p id="noCustomersMessageView" class="text-center text-gray-500 mt-6 text-lg hidden">No customers found.</p>
                </div>
            </section>

            <section id="recordPaymentView" class="content-section view-section hidden animate-fade-in-up">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">Record Payment</h3>
                <form id="recordPaymentForm" class="bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                    <div class="input-group relative mb-6">
                        <label for="paymentCustomerSearch" class="input-label">Search Customer (Name/Mobile):</label>
                        <input type="text" id="paymentCustomerSearch" placeholder="Enter customer name or mobile number..." class="input-field">
                        <div id="paymentCustomerSuggestions" class="suggestion-dropdown hidden"></div>
                    </div>
                    <div id="selectedPaymentCustomerDisplay" class="bg-blue-50 text-blue-800 p-4 rounded-md mb-6 border border-blue-200 shadow-sm transition-all duration-300">
                        No customer selected.
                    </div>
                    <input type="hidden" id="selectedPaymentCustomerId">

                    <div class="input-group mb-6">
                        <label for="amountPaid" class="input-label">Amount Paid:</label>
                        <input type="number" id="amountPaid" step="0.01" min="0" required class="input-field">
                    </div>
                    <div class="input-group mb-8">
                        <label for="paymentNote" class="input-label">Note (Optional):</label>
                        <input type="text" id="paymentNote" class="input-field">
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-money-bill-wave mr-2"></i> Record Payment
                        </button>
                    </div>
                </form>
            </section>

            <section id="viewCustomerDuesView" class="content-section view-section hidden animate-fade-in-up">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">Customer Dues Overview</h3>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                    <div class="overflow-x-auto custom-scrollbar">
                        <table id="customerDuesTable" class="min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <thead>
                                <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal border-b border-gray-200">
                                    <th class="py-3 px-6 text-left">Customer ID</th>
                                    <th class="py-3 px-6 text-left">Customer Name</th>
                                    <th class="py-3 px-6 text-left">Mobile No.</th>
                                    <th class="py-3 px-6 text-left">Total Due</th>
                                    <th class="py-3 px-6 text-left">Last Updated</th>
                                    <th class="py-3 px-6 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-700 text-sm font-light">
                                </tbody>
                        </table>
                    </div>
                    <p id="noDuesMessageView" class="text-center text-gray-500 mt-6 text-lg hidden">No outstanding dues found.</p>
                </div>
            </section>

            <section id="activityLogsView" class="content-section view-section hidden animate-fade-in-up">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 border-b-2 border-blue-500 pb-2">System Activity Logs</h3>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100">
                    <div class="overflow-x-auto custom-scrollbar">
                        <table id="activityLogsTable" class="min-w-full bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <thead>
                                <tr class="bg-gray-100 text-gray-700 uppercase text-sm leading-normal border-b border-gray-200">
                                    <th class="py-3 px-6 text-left">Log ID</th>
                                    <th class="py-3 px-6 text-left">User ID</th>
                                    <th class="py-3 px-6 text-left">Action Type</th>
                                    <th class="py-3 px-6 text-left">Description</th>
                                    <th class="py-3 px-6 text-left">Related Table</th>
                                    <th class="py-3 px-6 text-left">Related ID</th>
                                    <th class="py-3 px-6 text-left">Timestamp</th>
                                </tr>
                            </thead>
                            <tbody class="text-gray-700 text-sm font-light">
                                </tbody>
                        </table>
                    </div>
                    <p id="noLogsMessageView" class="text-center text-gray-500 mt-6 text-lg hidden">No activity logs found.</p>
                </div>
            </section>

        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>